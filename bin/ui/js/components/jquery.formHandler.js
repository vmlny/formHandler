!function(t){var e={selectors:{validation:"[data-validation-types]",required:"[required]",format:"[data-formatter]",event:"[data-focus-event], [data-blur-event], [data-keydown-event]",errorMessageTarget:".error-area"},attributes:{validationType:"data-validation-types",errorMsgSelector:"data-error-message-area",errorMsg:"data-error-message",errorClass:"data-error-class",errorHandler:"data-error-handler",formatter:"data-formatter",format:"data-formatter-pattern",formatXformCase:"data-formatter-transform-case",trimFormatting:"data-formatter-trim",lengthMax:"data-length-max",lengthMin:"data-length-min",length:"data-length",disclude:"data-donut-accept",include:"data-input-to-compare",dontCount:"data-do-not-count",regex:"data-pattern",customEvents:["data-focus-event","data-blur-event","data-keydown-event"]},scrollToError:!1,dontCount:/(\-|\.|\s|\(|\))/g,formatPatternWildCard:"x",genericErrorMessage:"Please complete all required fields.",errorClass:"validation-error",formatters:{uppercase:function(t){return(t+"").toUpperCase()},lowercase:function(t){return(t+"").toLowerCase()},capitalize:function(e){var r=e.split(" ")||[""];return t.map(r,function(t){return""!==t?t[0].toUpperCase()+t.slice(1).toLowerCase():t}).join(" ")},"match-pattern":function(e,r){var a=t(this),n=a.attr(r.attributes.formatXformCase),o=n&&"false"!==n.toLowerCase(),s=a.attr(r.attributes.trimFormatting),i=s&&"false"!==s.toLowerCase(),l=r.formatPatternWildCard.toLowerCase(),u=a.attr(r.attributes.format),d=u.split("")||[],c=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,f=new RegExp(u.replace(c,"\\$&").replace(new RegExp(l,"gi"),"(\\w|\\s)?")),m=0;return f.test(e)||""===e?e:t.map(d,function(t){var r=t,a=t.toLowerCase()!==t;return t.toLowerCase()===l&&(r=m<e.length?e[m]:"",o&&(r=a?r.toUpperCase():r.toLowerCase()),m++),r}).join("")+(i?"":e.slice(m))}},validators:{"not-empty":function(e,r){var a,n=t(this),o=n.attr("type"),s=n.attr("name").indexOf("[]")>0,i=n.attr(r.attributes.dontCount)||r.dontCount;if("radio"===o||"checkbox"===o)return s?t("[name^="+n.attr("name").replace("[]","")+"]:checked").length>0:t("[name="+n.attr("name")+"]:checked").length>0;if(n.is("select")){var l=t("option[default]",n),u=l.length>0?l.attr("value"):"";return n.val()!==u}return a=e.replace(i,""),a.length>0},"in-length-range":function(e,a){var n=t(this).attr(a.attributes.dontCount)||a.dontCount,o=e.replace(n,""),s=o.length,i=t(this).attr(a.attributes.lengthMax),l=t(this).attr(a.attributes.lengthMin);return r(t(this).attr("type")),i&&l?s>=Number(l)&&s<=Number(i):s<=Number(i)},"is-length":function(e,a){var n=parseInt(t(this).attr(a.attributes.length),10);return r(t(this).attr("type")),e.length===n},"is-numeric":function(e,a){var n=t(this).attr(a.attributes.dontCount)||a.dontCount,o=e.replace(n,"");return r(t(this).attr("type")),!isNaN(o)&&o%1===0&&""!==e},"is-inequal":function(e,a){var n=t(this).attr(a.attributes.disclude);return r(t(this).attr("type")),n.indexOf(e)<0},"is-equal":function(e,a){var n=t(t(this).attr(a.attributes.include)).val();return r(t(this).attr("type")),e===n},"is-email":function(e){return r(t(this).attr("type")),/.+@.+\..+/.test(e)},"is-phone":function(e){var a=/^1?[\s-.]?\(?\d{3}\)?[\s-.]?\d{3}[\s-.]?\d{4}([\s]?[xX]?\d{1,9})?$/,n=/^\d{10}$/;return r(t(this).attr("type")),a.test(e)||n.test(e)},"is-url":function(e){var a=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/;return r(t(this).attr("type")),a.test(e)},"match-regex":function(e,a){var n,o=t(this).attr(a.attributes.regex),s=o,i="";return 0===o.indexOf("/")&&(i=o.substr(o.lastIndexOf("/")+1),s=o.substr(1,o.lastIndexOf("/")-1),n=new RegExp(s,i)),n=new RegExp(s,i),r(t(this).attr("type")),n.test(e)}},messageHandlers:{general:function(e,r){var a=t(this),n=a.parents("form"),o=a.attr(r.attributes.errorMsgSelector)||r.selectors.errorMessageTarget,s=t(o),i=t(".error-msg",s),l=t("<div>").addClass("error-msg"),u=a.attr(r.attributes.errorMsg)||r.genericErrorMessage,d=a.attr(r.attributes.errorClass)||r.errorClass;s.add(a).add(n).addClass(d),(0===i.length||i.html().indexOf(u)<0)&&(l.html(u),l.appendTo(s))},"remove-messages":function(e,r){var a=t(this),n=a.parents("form"),o=a.attr(r.attributes.errorMsgSelector)||r.selectors.errorMessageTarget,s=t(o),i=t("div.error-msg",s);s.add(a).add(n).removeClass(r.attributes.errorClass),i.remove()}}},r=function(t){if("radio"===t||"checkbox"===t)throw new Error('input type "'+t+'" can only be validated as "not-empty".')};t.fn.formHandler=function(r){var a=t.extend(!0,{},e,r),n=!0,o=function(t,e){var r=!0,n=e.is("[required]");return(n||""!==e.val())&&(r=a.validators[t].call(e[0],e.val(),a)),r},s=function(e){var r=e.attr(a.attributes.validationType),s=(r||"not-empty").split(" "),u=!0;i(e),t.each(s,function(t,r){"function"!=typeof a.validators[r]&&window.console.error([r," is not a valid data-validation-type for: ",e[0].nodeName.toLowerCase(),'[name="',e[0].name,'"]'].join(""))}),t.each(s,function(t,r){var a=e.is("[required]");u=u?o(r,e):u,!a&&u||!n||(n=u)}),u||l(e)},i=function(t){a.messageHandlers["remove-messages"].call(t[0],t.val(),a)},l=function(t){var e=t.attr(a.attributes.errorHandler)||"general";a.messageHandlers[e].call(t[0],t.val(),a)},u=function(e,r){var a=t(r),n=t("label[for="+a.attr("name").replace("[]","")+"]");n=n.add("label[for="+a.attr("id")+"]"),n.addClass("required-label")},d=function(e,r){var n=t(r);n.on("blur",function(){var e=n.attr(a.attributes.formatter).split(" "),r=n.val();t.each(e,function(t,e){r=a.formatters[e].call(n[0],r,a)}),n.val(r)})},c=function(e,r){var n,o=t(r),s=t.map(a.attributes.customEvents,function(t){return o.attr(t)?t.split("-")[1]:void 0}),i=t.map(a.attributes.customEvents,function(t){return o.attr(t)});o.on(s.join(" "),function(t){var e=s.indexOf(t.type);n=n||o.parents("form"),t.type=i[e],n.trigger(t,[o.val()])})};return this.each(function(e,r){var o=t(r),i=t(a.selectors.required,o),l=t(a.selectors.validation,o),f=t(a.selectors.format,o),m=t(a.selectors.event,o),p=function(e){var r="undefined"!=typeof e&&e.currentTarget!==e.target?t(e.currentTarget):l.add(i),o=!1;n=!0,r.each(function(e,r){if(s(t(r)),!n&&!o&&a.scrollToError){var i=(t(r).offset().top,t(r).parent()),l=i.offset().top;o=!0,t("html, body").animate({scrollTop:l-200},300)}})};i.each(u),f.each(d),m.each(c),o.attr("novalidate","novalidate"),o.on("validate",p),o.on("submit",function(t){t.preventDefault(),p(),n&&o[0].submit()})})}}(jQuery);
